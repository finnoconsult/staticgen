extends ./blog.jade


append styles
	style
		| body{border-left:2px solid #00bd59;}
		| .post-teaser{max-width: 50em;}

block main
	main.narrative
		h1= heading || title
		p.post-teaser
			img(src=media.hero, alt="")
		p.created
			span.print= __("Written by ")
			a.avatar(href=linkTo(locale, "/author/" + urlify(author)))
				if knownAuthors[author]
					img(src=knownAuthors[author].photo, alt="", height=40, width=40)
				= " " + author
			span.print= __(" on ")
			time.entry-date.published(datetime=created.toISOString().split("T")[0])= moment(created).format("LL")
			span.print= "."
		!= contents
		aside.extension.share.screen#share
			h2.prelude= __("Share this article")
			p
				each platform, sep in sharingLinks
					if sep
						span.print= ", "
					a.button(class="share-"+platform.id, href=platform.dispatch.replace(/\{\{text\}\}/g, encodeURIComponent(title)).replace(/\{\{url\}\}/g, encodeURIComponent(homepage + path)))= __(platform.name)
				span.print= "."
		section.extension.tagged.screen#tags
			h2.prelude= __("Filed under")
			p
				each tag, sep in tags
					if sep
						span.print= ", "
					a.button(href=linkTo(locale, "/tag/" + urlify(tag)))= tag
				span.print= "."
	aside.narrative.dense.invert.screen
		section.related-content#related
			h2.prelude= __("You might also like")
			ul.article-teaser-list
				each relatedArticle in blog.filter(function (item) { return item.locale === locale && item.path !== path; }).slice(0, 3)
					li.article-teaser
						a(href=relatedArticle.path)
							img(src=relatedArticle.media.thumbnail, alt="", width=80, height=60)
							br
							time(datetime=relatedArticle.created.toISOString().split("T")[0])= moment(relatedArticle.created).format("LL")
							br
							strong= relatedArticle.heading || relatedArticle.title
							br
							span= relatedArticle.description
